<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mapper.UserMapper">

    <!-- 查询所有用户 -->
    <select id="findAll" resultType="com.example.entity.User">
        select id, username, password,email, mobile, avatar from t_user
    </select>

    <!-- 用户登录 -->
    <select id="login" resultType="com.example.entity.User">
        select * from t_user where username = #{username} and password = #{password}
    </select>

    <!-- 根据用户名查询用户 -->
    <select id="findByUsername" resultType="com.example.entity.User">
        select id, username, email, mobile, avatar from t_user where username = #{username}
    </select>

    <!-- 根据id查询用户 -->
    <select id="findById" resultType="com.example.entity.User">
        select id, username, email, mobile, avatar from t_user where id = #{id}
    </select>

    <!-- 更新用户头像 -->
    <update id="updateAvatar">
        update t_user set avatar = #{avatar} where id = #{id}
    </update>

    <!-- 用户注册 -->
    <insert id="addUser">
        insert into t_user
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="username">username,</if>
            <if test="password">password,</if>
            <if test="email != null">email,</if>
            <if test="mobile != null">mobile</if>
            <if test="avatar != null">avatar</if>
        </trim>
        <trim prefix="values(" suffix=")" suffixOverrides=",">
            <if test="username">#{username},</if>
            <if test="password">#{password},</if>
            <if test="email != null">#{email},</if>
            <if test="mobile != null">#{mobile},</if>
            <if test="avatar != null">#{avatar}</if>
        </trim>
    </insert>


</mapper>